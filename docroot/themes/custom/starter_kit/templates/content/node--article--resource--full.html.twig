<article{{ attributes }}>

  {% set tagline = '' %}
  {% if node.hasField('field_tagline') %}
    {% set tagline = content.field_tagline %}
  {% endif %}

  {% set subtitle = '' %}
  {% if node.hasField('field_summary') %}
    {% set subtitle = content.field_summary %}
  {% endif %}

  {% set hero_image = '' %}
  {% if node.hasField('field_header_image') %}
    {% set hero_image = content.field_header_image %}
  {% endif %}

  {% set date = node.getCreatedTime|format_date('tcg_full_date')  %}

  {% set type = '' %}
  {% if node.hasField('field_resource_type') %}
    {% set type = node.field_resource_type.0.entity.label %}
  {% endif %}

  {% set node_url = url('<current>')|render %}
  {% set social = [
    {
      type: 'linkedin',
      url: 'https://www.linkedin.com/sharing/share-offsite/?url=' ~ node_url
    },
    {
      type: 'twitter',
      url: 'https://twitter.com/intent/tweet?text=' ~ node.label ~ '&url=' ~ node_url
    },
    {
      type: 'facebook',
      url: 'https://www.facebook.com/sharer/sharer.php?u=' ~ node_url
    },
    {
      type: 'whatsapp',
      url: 'https://api.whatsapp.com/send?text=' ~ node_url
    }
  ] %}

  {% set lang = node.getTranslationLanguages()|length > 1 ? drupal_entity('block', 'dropdownlanguage', check_access=false)|render %}

  {% include "@sections/resource-header/_resource-header.html.twig" with {
    tagline: tagline,
    title: label,
    subtitle: subtitle,
    type: type,
    date: date,
    image: hero_image,
    download_type: tcg_file_dl_type,
    download_size: tcg_file_dl.size,
    download_url: '/media/' ~ tcg_file_dl.id ~ '/download',
    svg: content.field_areas,
    lang: lang,
    social: social,
    color: 'red',
    cta_button: cta
  }%}


  {{ content.field_body }}

  {% include "@sections/resource-download/_resource-download.html.twig" with {
    download_type: tcg_file_dl_type,
    download_size: tcg_file_dl.size,
    download_url: '/media/' ~ tcg_file_dl.id ~ '/download',
    svg: content.field_areas,
  }%}

  {% if tcg_tags %}
    {% include "@sections/article-tags/_article-tags.html.twig" with {
      tags: tcg_tags,
    } %}
  {% endif %}

  {% if node.hasField('field_related_content') %}
    {{ content.field_related_content }}
  {% endif %}

  {% set catch_cache = content|render %}
</article>
